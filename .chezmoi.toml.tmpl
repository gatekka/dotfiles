{{ $choices := list "Oh My Zsh" "bat" "delta" "dust" "fzf" "lazygit" "lsd" "neovim" "starship" "zoxide" -}}
{{ $defaultTools := list -}}
{{ if hasKey . "tools" -}}
  {{ if .tools -}}
    {{ range .tools -}}
      {{ if has . $choices -}}
        {{ $defaultTools = append $defaultTools . -}}
      {{ end -}}
    {{ end -}}
  {{ end -}}
{{ end -}}
{{ $tools := promptMultichoice "What tools do you want to download" $choices $defaultTools -}}
{{ $name := promptStringOnce . "name" "What is your name" -}}
{{ $email := promptStringOnce . "email" "What is your email address" -}}
{{ $signingkey := promptStringOnce . "git.signingkey" "Enter your public signing key for Git" -}}
{{ $hyprland := false -}}
{{ if eq .chezmoi.os "linux" -}}
  {{ $hyprland = promptBoolOnce . "includeHyprlandFiles" "Include Hyprland related dotfiles? Y/N" -}}
{{ end -}}
[git]
autoCommit = false

[diff]
pager = "delta"
exclude = ["externals"]

[data]
name = {{ $name | quote }}
email = {{ $email | quote }}
git.signingkey = {{ $signingkey | quote }}
includeHyprlandFiles = {{ $hyprland }}
tools = {{ $tools | toToml }}
{{ range $choices -}}
  {{ . | lower | replace " " "" }} = {{ has . $tools }}
{{ end -}}
